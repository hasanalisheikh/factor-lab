Metadata-Version: 2.4
Name: factorlab-engine
Version: 0.1.0
Summary: FactorLab compute worker for queued Supabase jobs
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: lightgbm>=4.5.0
Requires-Dist: numpy>=2.1.0
Requires-Dist: pandas>=2.2.0
Requires-Dist: scikit-learn>=1.5.0
Requires-Dist: supabase>=2.4.0
Requires-Dist: yfinance>=0.2.50

# FactorLab Engine

Python worker that polls queued jobs from Supabase, computes backtest outputs,
and writes `equity_curve` + `run_metrics` rows back to the database.
For ML strategies (`ml_ridge`, `ml_lightgbm`), it also writes:
- `features_monthly`
- `model_metadata`
- `model_predictions`

## Quick start

1. Set environment variables:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY`
2. Install:
   - `pip install -e .`
3. Run:
   - `factorlab-engine-worker`

## Price ingestion (Phase 6)

Ingest SP100 adjusted-close daily prices into `prices` and record ingestion metadata
in `data_last_updated`.

- Default run (about 10 years):
  - `factorlab-engine-ingest`
- Custom range:
  - `factorlab-engine-ingest --start-date 2015-01-01 --end-date 2026-02-20`
- Custom ticker set:
  - `factorlab-engine-ingest --tickers "SPY,QQQ,IWM"`

Optional settings:
- `POLL_INTERVAL_SECONDS` (default: `5`)
- `JOB_BATCH_SIZE` (default: `3`)
- `FACTORLAB_UNIVERSE` comma-separated tickers for baseline strategies
- `ML_TOP_N` (default: `10`)
- `ML_COST_BPS` (default: `10`)
- `ML_MIN_TRAIN_MONTHS` (default: `24`)
- `ML_WARMUP_YEARS` (default: `5`)
